<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–®–µ–ø–æ—Ç –ö–∞—Ä—Ç: –ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –¢–∞—Ä–æ</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">–®–µ–ø–æ—Ç –ö–∞—Ä—Ç</div>
            <div class="subtitle">–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –¢–∞—Ä–æ</div>
            <div class="subscription-status" id="subscriptionStatus">
                <span class="status-icon" id="statusIcon"></span>
                <span class="status-text" id="statusText"></span>
            </div>
        </header>

        <nav class="nav-tabs" id="mainNav">
            <div class="nav-tab active" data-tab="daily-card">–ö–∞—Ä—Ç–∞ –¥–Ω—è</div>
            <div class="nav-tab" data-tab="question">–í–æ–ø—Ä–æ—Å</div>
            <div class="nav-tab" data-tab="spreads">–†–∞—Å–∫–ª–∞–¥—ã</div>
            <div class="nav-tab" data-tab="history">–ò—Å—Ç–æ—Ä–∏—è</div>
        </nav>

        <nav class="nav-tabs-secondary" id="secondaryNav">
            <div class="nav-tab secondary" data-tab="reviews">–û—Ç–∑—ã–≤—ã</div>
            <div class="nav-tab secondary premium-tab" data-tab="premium">Premium</div>
        </nav>

        <!-- –ö–∞—Ä—Ç–∞ –¥–Ω—è -->
        <div id="daily-card" class="tab-content active">
            <div class="card-container">
                <div class="tarot-card" id="tarotCard">
                    <div class="card-back">
                        <span class="card-symbol">üîÆ</span>
                        <div class="card-text">–ù–∞–∂–º–∏ –Ω–∞ –∫–∞—Ä—Ç—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –¥–Ω—è</div>
                        <div id="starAnimationContainer"></div>
                    </div>
                    <div class="card-front hidden">
                        <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∫–∞–∫ background-image -->
                    </div>
                </div>
                <div class="card-info-after-flip hidden" id="cardInfoAfterFlip">
                    <div class="card-name" id="flippedCardName"></div>
                </div>
                <div class="card-intro-text hidden" id="cardIntroText"></div>
            </div>

            <div class="ai-answer-container hidden" id="aiAnswerContainer">
                <div class="ai-answer-box">
                    <div class="ai-answer-header">
                        <h4 id="aiInterpretationTitle">–ò–ò-–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è</h4>
                    </div>
                    <div class="ai-answer-content" id="aiInterpretationText"></div>
                </div>
            </div>

            <div class="subscription-banner hidden" id="afterDailyCardBanner">
                <div class="banner-icon">‚ú®</div>
                <div class="banner-content">
                    <h4>–£–∑–Ω–∞–π—Ç–µ –±–æ–ª—å—à–µ –æ —Å–≤–æ—ë–º –±—É–¥—É—â–µ–º</h4>
                    <p>–ó–∞–¥–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –ø–æ–ª—É—á–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –±–µ–∑–ª–∏–º–∏—Ç–Ω—ã–º —Ä–∞—Å–∫–ª–∞–¥–∞–º —Å Premium.</p>
                </div>
                <div class="banner-buttons">
                    <button class="banner-btn" id="askMoreQuestionsBtn">
                        <span>‚ùì</span> –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å
                    </button>
                    <button class="banner-btn premium" id="premiumBannerBtn">
                        <span>üëë</span> Premium
                    </button>
                </div>
            </div>
        </div>

        <!-- –í–æ–ø—Ä–æ—Å—ã -->
        <div id="question" class="tab-content">
            <div class="questions-left" id="questionsLeft">–û—Å—Ç–∞–ª–æ—Å—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤: 3</div>
            <div class="question-form">
                <h3>–ó–∞–¥–∞–π—Ç–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å</h3>
                <textarea id="questionTextarea" class="question-textarea" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å –∑–¥–µ—Å—å..."></textarea>
                <div class="char-counter" id="charCounter">0/200</div>
                <button class="question-btn" id="submitQuestionBtn" disabled>
                    <i class="fas fa-magic"></i> –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç
                </button>
            </div>
            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ -->
            <div id="questionAnimationContainer" class="hidden">
                <div class="question-intro-text" id="questionIntroText"></div>
            </div>
            
            <!-- –ö–∞—Ä—Ç–∞ –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å -->
            <div class="question-card-container hidden" id="questionCardContainer">
                <div class="tarot-card" id="questionTarotCard">
                    <div class="card-back">
                        <span class="card-symbol">üîÆ</span>
                        <div class="card-text">–ö–∞—Ä—Ç—ã –≥–æ—Ç–æ–≤—è—Ç –æ—Ç–≤–µ—Ç...</div>
                        <div id="questionStarAnimationContainer"></div>
                    </div>
                    <div class="card-front hidden">
                        <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∫–∞–∫ background-image -->
                    </div>
                </div>
                <div class="card-info-after-flip hidden" id="questionCardInfoAfterFlip">
                    <div class="card-name" id="questionFlippedCardName"></div>
                </div>
            </div>
            
            <div class="loading hidden" id="loadingState">
                <div class="magic-sparkles">‚ú®</div>
                <div class="magic-messages">
                    <p class="magic-message">–¢–∞–π–Ω—ã–µ —Å–∏–ª—ã —Å–æ–±–∏—Ä–∞—é—Ç—Å—è...</p>
                    <p class="magic-message">–ó–≤–µ–∑–¥—ã –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è...</p>
                    <p class="magic-message">–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Ä–æ–∂–¥–∞–µ—Ç—Å—è...</p>
                </div>
            </div>
            <div class="ai-answer-container hidden" id="questionAnswerContainer">
                <div class="ai-answer-box">
                    <div class="ai-answer-header">
                        <h4 id="questionAiInterpretationTitle">–ò–ò-–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è üîÆ</h4>
                    </div>
                    <div class="ai-answer-content" id="questionAnswerText"></div>
                </div>
                <div id="clarifyingQuestionContainer" class="hidden" style="margin-top: 20px;">
                    <h4>–ó–∞–¥–∞—Ç—å —É—Ç–æ—á–Ω—è—é—â–∏–π –≤–æ–ø—Ä–æ—Å:</h4>
                    <textarea id="clarifyingQuestionTextarea" class="question-textarea" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à —É—Ç–æ—á–Ω—è—é—â–∏–π –≤–æ–ø—Ä–æ—Å..."></textarea>
                    <button class="question-btn" id="submitClarifyingQuestionBtn">–ü–æ–ª—É—á–∏—Ç—å —É—Ç–æ—á–Ω–µ–Ω–∏–µ</button>
                    <p id="clarifyingQuestionWarning" class="hidden" style="font-size: 0.8rem; color: var(--secondary-text); margin-top: 10px;">
                        –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ—Ç—Ä–∞—Ç–∏—Ç –æ–¥–Ω—É –∏–∑ –≤–∞—à–∏—Ö –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫.
                    </p>
                </div>
            </div>
        </div>

        <!-- –†–∞—Å–∫–ª–∞–¥—ã -->
        <div id="spreads" class="tab-content">
            <div class="spreads-grid" id="spreadsGrid">
                <div class="spread-card" data-spread="success">
                    <span class="premium-badge">PREMIUM</span>
                    <div class="spread-icon">üåü</div>
                    <div class="spread-name">–†–∞—Å–∫–ª–∞–¥ "–ü—É—Ç—å –∫ —É—Å–ø–µ—Ö—É"</div>
                    <div class="spread-description">–ê–Ω–∞–ª–∏–∑ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π</div>
                </div>
                <div class="spread-card" data-spread="love">
                    <span class="premium-badge">PREMIUM</span>
                    <div class="spread-icon">üíñ</div>
                    <div class="spread-name">–†–∞—Å–∫–ª–∞–¥ "–û—Ç–Ω–æ—à–µ–Ω–∏—è"</div>
                    <div class="spread-description">–ü–æ–Ω–∏–º–∞–Ω–∏–µ —Å–≤—è–∑–∏ —Å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º</div>
                </div>
                <div class="spread-card" data-spread="money">
                    <span class="premium-badge">PREMIUM</span>
                    <div class="spread-icon">üí∏</div>
                    <div class="spread-name">–†–∞—Å–∫–ª–∞–¥ "–§–∏–Ω–∞–Ω—Å—ã"</div>
                    <div class="spread-description">–ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã –¥–µ–Ω–µ–∂–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞</div>
                </div>
                <div class="spread-card" data-spread="growth">
                    <span class="premium-badge">PREMIUM</span>
                    <div class="spread-icon">üîÆ</div>
                    <div class="spread-name">–†–∞—Å–∫–ª–∞–¥ "–õ–∏—á–Ω—ã–π —Ä–æ—Å—Ç"</div>
                    <div class="spread-description">–†–∞–∑–≤–∏—Ç–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞</div>
                </div>
            </div>
            
            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞—Å–∫–ª–∞–¥–∞ -->
            <div id="spreadResult" class="spread-result-container hidden">
                <div class="spread-back-button">
                    <button class="back-to-spreads-btn" id="backToSpreadsBtn">‚Üê –ù–∞–∑–∞–¥</button>
                </div>
                <div class="spread-result-header">
                    <h3 id="spreadResultTitle">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å–∫–ª–∞–¥–∞</h3>
                </div>
                
                <!-- –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è —Ä–∞—Å–∫–ª–∞–¥–∞ -->
                <div id="spreadAnimationContainer" class="hidden">
                    <div class="spread-intro-text" id="spreadIntroText"></div>
                </div>
                
                <!-- –ö–∞—Ä—Ç—ã —Ä–∞—Å–∫–ª–∞–¥–∞ -->
                <div id="spreadCardsContainer" class="spread-cards-container hidden">
                    <div class="spread-cards-layout" id="spreadCardsLayout">
                        <!-- –ö–∞—Ä—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
                
                <!-- –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–∞—Å–∫–ª–∞–¥–∞ -->
                <div class="ai-answer-container hidden" id="spreadAnswerContainer">
                    <div class="ai-answer-box">
                        <div class="ai-answer-header">
                            <h4 id="spreadAiInterpretationTitle">–ò–ò-–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–∞—Å–∫–ª–∞–¥–∞ üîÆ</h4>
                        </div>
                        <div class="ai-answer-content" id="spreadAnswerText"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ò—Å—Ç–æ—Ä–∏—è -->
        <div id="history" class="tab-content">
            <div class="history-container">
                <div class="history-section-header">
                    <h3>–ò—Å—Ç–æ—Ä–∏—è –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π</h3>
                </div>
                <p class="history-notice">–ò—Å—Ç–æ—Ä–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è 30 –¥–Ω–µ–π</p>
                <div class="history-list" id="historyList">
                    <div class="history-empty" id="historyEmptyState">
                        <span class="empty-icon">üìÇ</span>
                        <p>–í–∞—à–∞ –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –ø–æ–∫–∞ –ø—É—Å—Ç–∞.</p>
                        <p>–ù–∞—á–Ω–∏—Ç–µ —Å "–ö–∞—Ä—Ç—ã –¥–Ω—è" –∏–ª–∏ "–í–æ–ø—Ä–æ—Å–∞"!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- –û—Ç–∑—ã–≤—ã -->
        <div id="reviews" class="tab-content">
            <div class="reviews-container">
                <div class="reviews-header">
                    <h3>–û—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–π –æ—Ç–∑—ã–≤</h3>
                </div>
                <div class="review-form">
                    <h4>–í–∞—à–∞ –æ—Ü–µ–Ω–∫–∞:</h4>
                    <div class="rating-input">
                        <div class="stars" id="starRating">
                            <span class="star" data-value="1">‚òÖ</span>
                            <span class="star" data-value="2">‚òÖ</span>
                            <span class="star" data-value="3">‚òÖ</span>
                            <span class="star" data-value="4">‚òÖ</span>
                            <span class="star" data-value="5">‚òÖ</span>
                        </div>
                    </div>
                    <textarea class="review-textarea" id="reviewText" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –æ—Ç–∑—ã–≤ –∑–¥–µ—Å—å..."></textarea>
                    <button class="submit-review-btn" id="submitReviewBtn">
                        <i class="fas fa-paper-plane"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
                    </button>
                </div>

                <div class="reviews-header">
                    <h3>–û—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
                </div>
                <div class="reviews-list" id="reviewsList">
                    <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –æ—Ç–∑—ã–≤—ã -->
                </div>
            </div>
        </div>

        <!-- Premium -->
        <div id="premium" class="tab-content">
            <div class="premium-container">
                <div class="premium-header">
                    <div class="premium-icon">üëë</div>
                    <h2>–ü–æ–ª—É—á–∏—Ç–µ –º–∞–∫—Å–∏–º—É–º –æ—Ç –¢–∞—Ä–æ!</h2>
                    <p>–ü—Ä–∏–æ–±—Ä–µ—Ç–∏—Ç–µ Premium-–ø–æ–¥–ø–∏—Å–∫—É –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.</p>
                </div>

                <div class="premium-features">
                    <div class="feature-item">
                        <div class="feature-icon">‚ú®</div>
                        <div class="feature-text">
                            <strong>–ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ò–ò</strong>
                            <p>–ó–∞–¥–∞–≤–∞–π—Ç–µ –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏.</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">üåü</div>
                        <div class="feature-text">
                            <strong>–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ —Ä–∞—Å–∫–ª–∞–¥—ã</strong>
                            <p>–î–æ—Å—Ç—É–ø –∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã–º —Ä–∞—Å–∫–ª–∞–¥–∞–º –¢–∞—Ä–æ –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –≤–∞—à–µ–π –∂–∏–∑–Ω–∏.</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">üîí</div>
                        <div class="feature-text">
                            <strong>–ü—Ä–∏–≤–∞—Ç–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è</strong>
                            <p>–í—Å—è –≤–∞—à–∞ –∏—Å—Ç–æ—Ä–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —Ä–∞—Å–∫–ª–∞–¥–æ–≤ –Ω–∞–¥–µ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∞—Å.</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">‚ö°</div>
                        <div class="feature-text">
                            <strong>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</strong>
                            <p>–ü–æ–ª—É—á–∞–π—Ç–µ –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤—Å–µ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã.</p>
                        </div>
                    </div>
                </div>

                <div class="premium-pricing">
                    <div class="price-card">
                        <div class="price-label">–õ—É—á—à–∞—è —Ü–µ–Ω–∞</div>
                        <div class="price-value">‚ÇΩ499</div>
                        <div class="price-period">–≤ –º–µ—Å—è—Ü</div>
                        <ul class="price-benefits">
                            <li class="price-benefit">‚úÖ –ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã</li>
                            <li class="price-benefit">‚úÖ –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ —Ä–∞—Å–∫–ª–∞–¥—ã</li>
                            <li class="price-benefit">‚úÖ –ü—Ä–∏–≤–∞—Ç–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è</li>
                            <li class="price-benefit">‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</li>
                        </ul>
                        <button class="premium-buy-btn" id="premiumBuyBtn">–ö—É–ø–∏—Ç—å Premium</button>
                    </div>
                </div>

                <!-- Test Toggle -->
                <div class="test-toggle-container">
                    <h4>–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h4>
                    <label class="toggle-switch">
                        <input type="checkbox" id="premiumTestToggle">
                        <span class="slider round"></span>
                    </label>
                    <span id="premiumTestLabel">–ë–∞–∑–æ–≤—ã–π —Ä–µ–∂–∏–º</span>
                    
                    <!-- TarotDB Test Button -->
                    <button id="testTarotDBBtn" class="test-button" onclick="if(window.TarotApp && window.TarotApp.testTarotDB) window.TarotApp.testTarotDB()">
                        üß™ –¢–µ—Å—Ç TarotDB
                    </button>
                </div>

            </div>
        </div>
    </div>

    <!-- Toast –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
    <div id="toast" class="toast hidden"></div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
    <script src="supabase.js"></script>
    <script src="script.js"></script>
</body>
</html>
